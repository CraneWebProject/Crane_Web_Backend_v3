FROM openjdk:17-jdk-slim
WORKDIR /app

# 환경변수 정의
ARG REDIS_HOST
ARG REDIS_PORT
ARG EUREKA_URL
ARG MYSQL_URL
ARG MYSQL_USER
ARG MYSQL_PASSWORD
ARG JWT_KEY

# 환경변수 설정
ENV REDIS_HOST=${REDIS_HOST}
ENV REDIS_PORT=${REDIS_PORT}
ENV EUREKA_URL=${EUREKA_URL}
ENV MYSQL_URL=${MYSQL_URL}
ENV MYSQL_USER=${MYSQL_USER}
ENV MYSQL_PASSWORD=${MYSQL_PASSWORD}
ENV JWT_KEY=${JWT_KEY}

COPY build/libs/user-service-0.0.1-SNAPSHOT.jar app.jar

EXPOSE 8081

ENTRYPOINT ["java", "-jar", "app.jar"]